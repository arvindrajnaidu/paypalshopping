{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/utils/ext.js","src/scripts/xo.js"],"names":[],"mappings":"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","file":"xo.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const apis = [\n  'alarms',\n  'bookmarks',\n  'browserAction',\n  'commands',\n  'contextMenus',\n  'cookies',\n  'downloads',\n  'events',\n  'extension',\n  'extensionTypes',\n  'history',\n  'i18n',\n  'idle',\n  'notifications',\n  'pageAction',\n  'runtime',\n  'storage',\n  'tabs',\n  'webNavigation',\n  'webRequest',\n  'windows',\n]\n\nfunction Extension () {\n  const _this = this\n\n  apis.forEach(function (api) {\n\n    _this[api] = null\n\n    try {\n      if (chrome[api]) {\n        _this[api] = chrome[api]\n      }\n    } catch (e) {}\n\n    try {\n      if (window[api]) {\n        _this[api] = window[api]\n      }\n    } catch (e) {}\n\n    try {\n      if (browser[api]) {\n        _this[api] = browser[api]\n      }\n    } catch (e) {}\n    try {\n      _this.api = browser.extension[api]\n    } catch (e) {}\n  })\n\n  try {\n    if (browser && browser.runtime) {\n      this.runtime = browser.runtime\n    }\n  } catch (e) {}\n\n  try {\n    if (browser && browser.browserAction) {\n      this.browserAction = browser.browserAction\n    }\n  } catch (e) {}\n\n}\n\nmodule.exports = new Extension();","import ext from \"./utils/ext\"\n\nconst displayProfile = (payer) => {\n\n  document.getElementById('profile').style.display = 'block'\n  document.getElementById('profile_name').innerText = payer.shipping_address.recipient_name;\n  document.getElementById('shipping-address').innerText = payer.shipping_address.line1;\n  document.getElementById('profile-email').innerText = payer.email;\n\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  let xoButton = document.getElementById('xo')\n  let spinner = document.getElementById('spinner')\n  xoButton.addEventListener('click', () => {\n    spinner.style.display = 'block'\n    xoButton.style.display = 'none'\n    ext.tabs.query({active: true, currentWindow: true}, function(tabs) {\n      ext.tabs.sendMessage(tabs[0].id, {action: \"getECToken\"}, ({ecToken}) => {\n        fetch(`https://www.paypal.com/shoplist/xo/approve?ecToken=${ecToken}`, {\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        })\n        .then(function(response) {\n            return response.json()\n        })\n        .then(function(data) {\n          console.log(data.payer.payer_info, 'Approved')\n          data.intent = 'authorize'\n          data.extAction = 'approve'\n          let payerID = data.payer.payer_info.payer_id\n          \n          spinner.style.display = 'none'\n          displayProfile(data.payer.payer_info)\n\n          const payload = {\n            extAction: 'approve',\n            intent: 'authorize',\n            orderID: data.id,\n            paymentID: ecToken,\n            payerID,\n            paymentToken: data.id,\n            returnUrl: `https://www.paypal.com/checkoutnow/error?paymentId=${ecToken}&token=${data.id}&PayerID=${payerID}`\n          }\n          \n          ext.tabs.sendMessage(tabs[0].id, payload, () => {\n          })\n        })\n        .catch(console.log)\n      })\n    })  \n  })  \n})\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy91dGlscy9leHQuanMiLCJzcmMvc2NyaXB0cy94by5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBTSxPQUFPLENBQ1gsUUFEVyxFQUVYLFdBRlcsRUFHWCxlQUhXLEVBSVgsVUFKVyxFQUtYLGNBTFcsRUFNWCxTQU5XLEVBT1gsV0FQVyxFQVFYLFFBUlcsRUFTWCxXQVRXLEVBVVgsZ0JBVlcsRUFXWCxTQVhXLEVBWVgsTUFaVyxFQWFYLE1BYlcsRUFjWCxlQWRXLEVBZVgsWUFmVyxFQWdCWCxTQWhCVyxFQWlCWCxTQWpCVyxFQWtCWCxNQWxCVyxFQW1CWCxlQW5CVyxFQW9CWCxZQXBCVyxFQXFCWCxTQXJCVyxDQUFiOztBQXdCQSxTQUFTLFNBQVQsR0FBc0I7QUFDcEIsTUFBTSxRQUFRLElBQWQ7O0FBRUEsT0FBSyxPQUFMLENBQWEsVUFBVSxHQUFWLEVBQWU7O0FBRTFCLFVBQU0sR0FBTixJQUFhLElBQWI7O0FBRUEsUUFBSTtBQUNGLFVBQUksT0FBTyxHQUFQLENBQUosRUFBaUI7QUFDZixjQUFNLEdBQU4sSUFBYSxPQUFPLEdBQVAsQ0FBYjtBQUNEO0FBQ0YsS0FKRCxDQUlFLE9BQU8sQ0FBUCxFQUFVLENBQUU7O0FBRWQsUUFBSTtBQUNGLFVBQUksT0FBTyxHQUFQLENBQUosRUFBaUI7QUFDZixjQUFNLEdBQU4sSUFBYSxPQUFPLEdBQVAsQ0FBYjtBQUNEO0FBQ0YsS0FKRCxDQUlFLE9BQU8sQ0FBUCxFQUFVLENBQUU7O0FBRWQsUUFBSTtBQUNGLFVBQUksUUFBUSxHQUFSLENBQUosRUFBa0I7QUFDaEIsY0FBTSxHQUFOLElBQWEsUUFBUSxHQUFSLENBQWI7QUFDRDtBQUNGLEtBSkQsQ0FJRSxPQUFPLENBQVAsRUFBVSxDQUFFO0FBQ2QsUUFBSTtBQUNGLFlBQU0sR0FBTixHQUFZLFFBQVEsU0FBUixDQUFrQixHQUFsQixDQUFa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ZjtBQWdDRCxPQWpDRDtBQWtDRCxLQW5DRDtBQW9DRCxHQXZDRDtBQXdDRCxDQTNDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImNvbnN0IGFwaXMgPSBbXG4gICdhbGFybXMnLFxuICAnYm9va21hcmtzJyxcbiAgJ2Jyb3dzZXJBY3Rpb24nLFxuICAnY29tbWFuZHMnLFxuICAnY29udGV4dE1lbnVzJyxcbiAgJ2Nvb2tpZXMnLFxuICAnZG93bmxvYWRzJyxcbiAgJ2V2ZW50cycsXG4gICdleHRlbnNpb24nLFxuICAnZXh0ZW5zaW9uVHlwZXMnLFxuICAnaGlzdG9yeScsXG4gICdpMThuJyxcbiAgJ2lkbGUnLFxuICAnbm90aWZpY2F0aW9ucycsXG4gICdwYWdlQWN0aW9uJyxcbiAgJ3J1bnRpbWUnLFxuICAnc3RvcmFnZScsXG4gICd0YWJzJyxcbiAgJ3dlYk5hdmlnYXRpb24nLFxuICAnd2ViUmVxdWVzdCcsXG4gICd3aW5kb3dzJyxcbl1cblxuZnVuY3Rpb24gRXh0ZW5zaW9uICgpIHtcbiAgY29uc3QgX3RoaXMgPSB0aGlzXG5cbiAgYXBpcy5mb3JFYWNoKGZ1bmN0aW9uIChhcGkpIHtcblxuICAgIF90aGlzW2FwaV0gPSBudWxsXG5cbiAgICB0cnkge1xuICAgICAgaWYgKGNocm9tZVthcGldKSB7XG4gICAgICAgIF90aGlzW2FwaV0gPSBjaHJvbWVbYXBpXVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHdpbmRvd1thcGldKSB7XG4gICAgICAgIF90aGlzW2FwaV0gPSB3aW5kb3dbYXBpXVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGJyb3dzZXJbYXBpXSkge1xuICAgICAgICBfdGhpc1thcGldID0gYnJvd3NlclthcGldXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICB0cnkge1xuICAgICAgX3RoaXMuYXBpID0gYnJvd3Nlci5leHRlbnNpb25bYXBpXVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH0pXG5cbiAgdHJ5IHtcbiAgICBpZiAoYnJvd3NlciAmJiBicm93c2VyLnJ1bnRpbWUpIHtcbiAgICAgIHRoaXMucnVudGltZSA9IGJyb3dzZXIucnVudGltZVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cblxuICB0cnkge1xuICAgIGlmIChicm93c2VyICYmIGJyb3dzZXIuYnJvd3NlckFjdGlvbikge1xuICAgICAgdGhpcy5icm93c2VyQWN0aW9uID0gYnJvd3Nlci5icm93c2VyQWN0aW9uXG4gICAgfVxuICB9IGNhdGNoIChlKSB7fVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IEV4dGVuc2lvbigpOyIsImltcG9ydCBleHQgZnJvbSBcIi4vdXRpbHMvZXh0XCJcblxuY29uc3QgZGlzcGxheVByb2ZpbGUgPSAocGF5ZXIpID0+IHtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZmlsZScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9maWxlX25hbWUnKS5pbm5lclRleHQgPSBwYXllci5zaGlwcGluZ19hZGRyZXNzLnJlY2lwaWVudF9uYW1lO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hpcHBpbmctYWRkcmVzcycpLmlubmVyVGV4dCA9IHBheWVyLnNoaXBwaW5nX2FkZHJlc3MubGluZTE7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9maWxlLWVtYWlsJykuaW5uZXJUZXh0ID0gcGF5ZXIuZW1haWw7XG5cbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XG4gIGxldCB4b0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd4bycpXG4gIGxldCBzcGlubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwaW5uZXInKVxuICB4b0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBzcGlubmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgeG9CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGV4dC50YWJzLnF1ZXJ5KHthY3RpdmU6IHRydWUsIGN1cnJlbnRXaW5kb3c6IHRydWV9LCBmdW5jdGlvbih0YWJzKSB7XG4gICAgICBleHQudGFicy5zZW5kTWVzc2FnZSh0YWJzWzBdLmlkLCB7YWN0aW9uOiBcImdldEVDVG9rZW5cIn0sICh7ZWNUb2tlbn0pID0+IHtcbiAgICAgICAgZmV0Y2goYGh0dHBzOi8vd3d3LnBheXBhbC5jb20vc2hvcGxpc3QveG8vYXBwcm92ZT9lY1Rva2VuPSR7ZWNUb2tlbn1gLCB7XG4gICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YS5wYXllci5wYXllcl9pbmZvLCAnQXBwcm92ZWQnKVxuICAgICAgICAgIGRhdGEuaW50ZW50ID0gJ2F1dGhvcml6ZSdcbiAgICAgICAgICBkYXRhLmV4dEFjdGlvbiA9ICdhcHByb3ZlJ1xuICAgICAgICAgIGxldCBwYXllcklEID0gZGF0YS5wYXllci5wYXllcl9pbmZvLnBheWVyX2lkXG4gICAgICAgICAgXG4gICAgICAgICAgc3Bpbm5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgZGlzcGxheVByb2ZpbGUoZGF0YS5wYXllci5wYXllcl9pbmZvKVxuXG4gICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIGV4dEFjdGlvbjogJ2FwcHJvdmUnLFxuICAgICAgICAgICAgaW50ZW50OiAnYXV0aG9yaXplJyxcbiAgICAgICAgICAgIG9yZGVySUQ6IGRhdGEuaWQsXG4gICAgICAgICAgICBwYXltZW50SUQ6IGVjVG9rZW4sXG4gICAgICAgICAgICBwYXllcklELFxuICAgICAgICAgICAgcGF5bWVudFRva2VuOiBkYXRhLmlkLFxuICAgICAgICAgICAgcmV0dXJuVXJsOiBgaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9jaGVja291dG5vdy9lcnJvcj9wYXltZW50SWQ9JHtlY1Rva2VufSZ0b2tlbj0ke2RhdGEuaWR9JlBheWVySUQ9JHtwYXllcklEfWBcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgZXh0LnRhYnMuc2VuZE1lc3NhZ2UodGFic1swXS5pZCwgcGF5bG9hZCwgKCkgPT4ge1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmxvZylcbiAgICAgIH0pXG4gICAgfSkgIFxuICB9KSAgXG59KVxuIl19"}