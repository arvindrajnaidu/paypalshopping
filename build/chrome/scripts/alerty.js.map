{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/alerty.js"],"names":[],"mappings":"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","file":"alerty.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*!\n * alerty v0.0.1 (https://github.com/undead25/alerty#readme)\n * Copyright 2016 undead25\n * Licensed under the MIT license\n */\n(function () {\n  'use strict';\n\n  // common function which is often using\n  var commonUse = {\n    /**\n     * [Add class to element]\n     *\n     * @param el {Object}   -- element.\n     * @param cls {String}  -- classes.\n     */\n    addClass: function(el, cls) {\n      var elClass = el.className;\n      var blank = (elClass !== '') ? ' ' : '';\n      var added = elClass + blank + cls;\n      el.className = added;\n    },\n\n    /**\n     * [Remove class from element]\n     *\n     * @param el {Object}   -- element.\n     * @param cls {String}  -- classes.\n     */\n    removeClass: function(el, cls) {\n      var elClass = ' '+el.className+' ';\n      elClass = elClass.replace(/(\\s+)/gi, ' ');\n      var removed = elClass.replace(' '+cls+' ', ' ');\n      removed = removed.replace(/(^\\s+)|(\\s+$)/g, '');\n      el.className = removed;\n    },\n\n    /**\n     * [if element has some class]\n     *\n     * @param el {Object}   -- element.\n     * @param cls {String}  -- classes.\n     *\n     * @return  {Boolean}   -- true or false.\n     */\n    hasClass: function(el, cls) {\n      var elClass = el.className;\n      var elClassList = elClass.split(/\\s+/);\n      var x = 0;\n      for(x in elClassList) {\n        if(elClassList[x] == cls) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * [add event to some element, dom0, dom1, supports fuck ie]\n     *\n     * @param el {Object}       -- element.\n     * @param type {String}     -- event type, such as 'click', 'mouseover'.\n     * @param func {Function}   -- function.\n     *\n     */\n    addEvent: function(el, type, func) {\n      if(el.addEventListener) {\n        el.addEventListener(type, func, false);\n      } else if(el.attachEvent){ \n        el.attachEvent('on' + type, func);\n      } else{ \n        el['on' + type] = func; \n      }  \n    },\n\n    /**\n     * [remove event to some element, dom0, dom1, supports fuck ie]\n     *\n     * @param el {Object}       -- element.\n     * @param type {String}     -- event type, such as 'click', 'mouseover'.\n     * @param func {Function}   -- function.\n     *\n     */\n    removeEvent: function(el, type, func) {\n      if (el.removeEventListener){ \n        el.removeEventListener(type, func, false);\n      } else if (el.detachEvent){\n        el.detachEvent('on' + type, func);\n      } else {\n        delete el['on' + type];\n      }\n    },\n\n    /**\n     * [Remove element node]\n     *\n     * @param el {Object}   -- element.\n     *\n     */\n    removeElement: function(el) {\n      (el && el.parentNode) && el.parentNode.removeChild(el);\n    },\n\n    /**\n     * [Set unique id]\n     *\n     * @param prefix {String}   -- id prefix name.\n     *\n     * @return  {String}\n     */\n    setUid: function(prefix) {\n      do prefix += Math.floor(Math.random() * 1000000);\n      while (document.getElementById(prefix));\n      return prefix;\n    }\n  };\n\n  /**\n   * [Alertiy public API]\n   *\n   * @return {Object}\n   */\n  var Alerty = function() {\n\n    // private object for Alerty object inherit\n    var Dialog = {\n      \n      // static defaults params\n      defaults: {\n        okLabel: '\\u786e\\u5b9a',\n        cancelLabel: '\\u53d6\\u6d88',\n        time: 2000\n      },\n\n      previousCallback: null,  // for cache previous toasts callbak, to handle if call more than 1 alerty\n\n      // html templates\n      template: '<div class=\"alerty-overlay\" tabindex=\"-1\"></div>'+\n                '<div class=\"alerty\">'+\n                  '<div class=\"alerty-title\"></div>'+\n                  '<div class=\"alerty-content\">'+\n                    '<p class=\"alerty-message\"></p>'+\n                    '<div class=\"alerty-prompt\">'+\n                      '<input type=\"text\" placeholder=\"\" value=\"\">'+\n                      '<div class=\"input-line\"></div>'+\n                    '</div>'+\n                  '</div>'+\n                  '<div class=\"alerty-action\">'+\n                    '<a class=\"btn-cancel\"></a>'+\n                    '<a class=\"btn-ok\"></a>'+\n                  '</div>'+\n                '</div>',\n\n\n\n      /** \n       * [Build the HTML contents]\n       *\n       * @param type {String}           -- get the dialog type to arrange the correspondent html content.\n       * @param content {String}        -- the text contents dialog to users.\n       * @param opts {Object}           -- options.\n       * @param onOk {Function}         -- custom callback function after click ok button.\n       * @param onCancel {Function}     -- custom callback function after click cancel button.\n       */\n      setup: function(type, content, opts, onOk, onCancel) {\n        // for if argument opts is not given.\n        var detect = typeof opts === 'function';\n        if (detect) {\n          onCancel = onOk;\n          onOk = opts;\n        }\n\n        var $oldModal = document.querySelector('.alerty');\n\n\n        // if previous modal is open, remove it and immediately callback\n        if ($oldModal) {\n          commonUse.removeElement($oldModal);\n          var _callback = this.previousCallback;\n          if (_callback) _callback();\n        }\n\n        var $wrapper = document.createElement('div');\n        $wrapper.innerHTML = this.template;\n\n        // append alerty to body\n        while ($wrapper.firstChild) {\n          document.body.appendChild($wrapper.firstChild);\n        }\n\n        // cache alerty dom for next use\n        var $modal = document.querySelector('.alerty');\n        var $overlay = document.querySelector('.alerty-overlay');\n        var $title = $modal.querySelector('.alerty-title');\n        var $message = $modal.querySelector('.alerty-message');\n        var $btnArea = $modal.querySelector('.alerty-action');\n        var $btnOk = $modal.querySelector('.btn-ok');\n        var $btnCancel = $modal.querySelector('.btn-cancel');\n        var $prompt = $modal.querySelector('.alerty-prompt');\n        var $input = $prompt.querySelector('input');\n\n        // set uid\n        $modal.id = commonUse.setUid('alerty');\n        $overlay.id = 'overlay-'+$modal.id;\n\n        // animation show alerty\n        commonUse.addClass($overlay, 'active');\n        commonUse.addClass($modal, 'alerty-show');\n        $message.innerHTML = content;  // set msg\n\n        if (opts && opts.time) this.defaults.time = opts.time; // handle time if set\n\n        if (type !== 'prompt') {\n          commonUse.removeElement($prompt); // other type do not need\n        } else {\n          $input.focus(); // auto focus input if type prompt\n\n          if(opts && opts.inputType) $input.setAttribute('type', opts.inputType); // handle input type, such as 'password'\n          if(opts && opts.inputPlaceholder) $input.setAttribute('placeholder', opts.inputPlaceholder); // handle input placeholder\n          if(opts && opts.inputValue) $input.setAttribute('value', opts.inputValue); // handle input default value \n        }\n\n        if (type === 'toasts') {\n          this.previousCallback = onOk;  // cache callback\n\n          // rearrange template\n          commonUse.removeElement($title);\n          commonUse.removeElement($btnArea);\n          commonUse.removeElement($overlay);\n          commonUse.addClass($modal, 'toasts');\n\n          if (opts && opts.place === 'top') commonUse.addClass($modal, 'place-top'); // handle toasts top place\n          if (opts && opts.bgColor) $modal.style.backgroundColor = opts.bgColor;\n          if (opts && opts.fontColor) $message.style.color =opts.fontColor;\n\n        } else {\n          commonUse.addClass(document.body, 'no-scrolling'); // body no scorll\n          (opts && opts.title) ? $title.innerHTML = opts.title : commonUse.removeElement($title); // handle title if set\n          (opts && opts.okLabel) ? $btnOk.innerHTML = opts.okLabel : $btnOk.innerHTML = this.defaults.okLabel; // handle ok text if set\n          $modal.style.marginTop =  - $modal.offsetHeight / 2 + 'px'; // set the place to center using margin-top;\n\n          if (type === 'confirm' || type === 'prompt') {\n            (opts && opts.cancelLabel) ? $btnCancel.innerHTML = opts.cancelLabel : $btnCancel.innerHTML = this.defaults.cancelLabel; // handle cancel text if set\n          } else {\n            commonUse.removeElement($btnCancel); // toasts and alery type do not need cancel btn\n          }\n        }\n\n        this.bindEvent($modal, onOk, onCancel); // see next\n      },\n\n      /** \n       * [Bind event to dialog]\n       *\n       * @param $modal {Object}       -- modal node.\n       * @param: onOk {Function}      -- ok callback.\n       * @param: onCancel {Function}  -- cancel callback.\n       */\n      bindEvent: function($modal, onOk, onCancel) {\n        var that = this;\n        var $btnOk = $modal.querySelector('.btn-ok');\n        var $btnCancel = $modal.querySelector('.btn-cancel');\n\n        // toasts delay hide\n        if (commonUse.hasClass($modal, 'toasts')) {\n          setTimeout(function() {\n            // if toasts has been removed\n            if (document.getElementById($modal.id) === null) return;\n            that.close($modal, onOk);\n          }, that.defaults.time);\n        }\n        // click ok button\n        if ($btnOk) {\n          commonUse.addEvent($btnOk, 'click', function() {\n            that.close($modal, onOk);\n          });\n        }\n        // click cancel button\n        if ($btnCancel) {\n          commonUse.addEvent($btnCancel, 'click', function() {\n            that.close($modal, onCancel);\n          });\n        }\n      },\n\n      /** \n       * [Close the actived modal and remove it]\n       *\n       * @param: $modal {Obejct}  -- modal element to remove.\n       * @param: callback {Function}  -- callback function.\n       */\n      close: function($modal, callback) {\n        var $input = $modal.querySelector('input');\n        var $overlay = document.getElementById('overlay-'+$modal.id);\n\n        // hide alerty with animation\n        commonUse.removeClass($modal, 'alerty-show');\n        commonUse.addClass($modal, 'alerty-hide');\n\n        // remove alerty and other added elements\n        setTimeout(function(){\n          $overlay && commonUse.removeClass($overlay, 'active'), commonUse.removeClass(document.body, 'no-scrolling');\n          \n          commonUse.removeElement($modal);\n          commonUse.removeElement($overlay);\n          if (callback) {\n            setTimeout(function(){\n              !$input ? callback() : callback($input.value);  // handle prompt type, callback the input value\n            }, 100);\n          }\n        },100);\n      }\n    };\n\n    return {\n      // return alerty.toasts();\n      toasts: function(content, opts, callback) {\n        Dialog.setup('toasts', content, opts, callback);\n      },\n\n      // return alerty.alert();\n      alert: function(content, opts, onOk) {\n        Dialog.setup('alert', content, opts, onOk);\n      },\n\n      // return alerty.confirm();\n      confirm: function(content, opts, onOk, onCancel) {\n        Dialog.setup('confirm', content, opts, onOk, onCancel);\n      },\n\n      // return alerty.prompt();\n      prompt: function(content, opts, onOk, oncancel) {\n        Dialog.setup('prompt', content, opts, onOk, oncancel);\n      }\n    };\n  };\n\n  window.alerty = new Alerty();\n\n}());"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9hbGVydHkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7OztBQUtDLGFBQVk7QUFDWDs7QUFFQTs7QUFDQSxNQUFJLFlBQVk7QUFDZDs7Ozs7O0FBTUEsY0FBVSxrQkFBUyxFQUFULEVBQWEsR0FBYixFQUFrQjtBQUMxQixVQUFJLFVBQVUsR0FBRyxTQUFqQjtBQUNBLFVBQUksUUFBUyxZQUFZLEVBQWIsR0FBbUIsR0FBbkIsR0FBeUIsRUFBckM7QUFDQSxVQUFJLFFBQVEsVUFBVSxLQUFWLEdBQWtCLEdBQTlCO0FBQ0EsU0FBRyxTQUFILEdBQWUsS0FBZjtBQUNELEtBWmE7O0FBY2Q7Ozs7OztBQU1BLGlCQUFhLHFCQUFTLEVBQVQsRUFBYSxHQUFiLEVBQWtCO0FBQzdCLFVBQUksVUFBVSxNQUFJLEdBQUcsU0FBUCxHQUFpQixHQUEvQjtBQUNBLGdCQUFVLFFBQVEsT0FBUixDQUFnQixTQUFoQixFQUEyQixHQUEzQixDQUFWO0FBQ0EsVUFBSSxVQUFVLFFBQVEsT0FBUixDQUFnQixNQUFJLEdBQUosR0FBUSxHQUF4QixFQUE2QixHQUE3QixDQUFkO0FBQ0EsZ0JBQVUsUUFBUSxPQUFSLENBQWdCLGdCQUFoQixFQUFrQyxFQUFsQyxDQUFWO0FBQ0EsU0FBRyxTQUFILEdBQWUsT0FBZjtBQUNELEtBMUJhOztBQTRCZDs7Ozs7Ozs7QUFRQSxjQUFVLGtCQUFTLEVBQVQsRUFBYSxHQUFiLEVBQWtCO0FBQzFCLFVBQUksVUFBVSxHQUFHLFNBQWpCO0FBQ0EsVUFBSSxjQUFjLFFBQVEsS0FBUixDQUFjLEtBQWQsQ0FBbEI7QUFDQSxVQUFJLElBQUksQ0FBUjtBQUNBLFdBQUksQ0FBSixJQUFTLFdBQVQsRUFBc0I7QUFDcEIsWUFBRyxZQUFZLENBQVosS0FBa0IsR0FBckIsRUFBMEI7QUFDeEIsaUJBQU8sSUFBUDtBQUNEO0FBQ0Y7QUFDRCxh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eEIsRUFBOEIsUUFBOUIsRUFBd0M7QUFDL0MsZUFBTyxLQUFQLENBQWEsU0FBYixFQUF3QixPQUF4QixFQUFpQyxJQUFqQyxFQUF1QyxJQUF2QyxFQUE2QyxRQUE3QztBQUNELE9BZEk7O0FBZ0JMO0FBQ0EsY0FBUSxnQkFBUyxPQUFULEVBQWtCLElBQWxCLEVBQXdCLElBQXhCLEVBQThCLFFBQTlCLEVBQXdDO0FBQzlDLGVBQU8sS0FBUCxDQUFhLFFBQWIsRUFBdUIsT0FBdkIsRUFBZ0MsSUFBaEMsRUFBc0MsSUFBdEMsRUFBNEMsUUFBNUM7QUFDRDtBQW5CSSxLQUFQO0FBcUJELEdBck5EOztBQXVOQSxTQUFPLE1BQVAsR0FBZ0IsSUFBSSxNQUFKLEVBQWhCO0FBRUQsQ0E5VUEsR0FBRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qIVxuICogYWxlcnR5IHYwLjAuMSAoaHR0cHM6Ly9naXRodWIuY29tL3VuZGVhZDI1L2FsZXJ0eSNyZWFkbWUpXG4gKiBDb3B5cmlnaHQgMjAxNiB1bmRlYWQyNVxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBjb21tb24gZnVuY3Rpb24gd2hpY2ggaXMgb2Z0ZW4gdXNpbmdcbiAgdmFyIGNvbW1vblVzZSA9IHtcbiAgICAvKipcbiAgICAgKiBbQWRkIGNsYXNzIHRvIGVsZW1lbnRdXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWwge09iamVjdH0gICAtLSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBjbHMge1N0cmluZ30gIC0tIGNsYXNzZXMuXG4gICAgICovXG4gICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKGVsLCBjbHMpIHtcbiAgICAgIHZhciBlbENsYXNzID0gZWwuY2xhc3NOYW1lO1xuICAgICAgdmFyIGJsYW5rID0gKGVsQ2xhc3MgIT09ICcnKSA/ICcgJyA6ICcnO1xuICAgICAgdmFyIGFkZGVkID0gZWxDbGFzcyArIGJsYW5rICsgY2xzO1xuICAgICAgZWwuY2xhc3NOYW1lID0gYWRkZWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFtSZW1vdmUgY2xhc3MgZnJvbSBlbGVtZW50XVxuICAgICAqXG4gICAgICogQHBhcmFtIGVsIHtPYmplY3R9ICAgLS0gZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gY2xzIHtTdHJpbmd9ICAtLSBjbGFzc2VzLlxuICAgICAqL1xuICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihlbCwgY2xzKSB7XG4gICAgICB2YXIgZWxDbGFzcyA9ICcgJytlbC5jbGFzc05hbWUrJyAnO1xuICAgICAgZWxDbGFzcyA9IGVsQ2xhc3MucmVwbGFjZSgvKFxccyspL2dpLCAnICcpO1xuICAgICAgdmFyIHJlbW92ZWQgPSBlbENsYXNzLnJlcGxhY2UoJyAnK2NscysnICcsICcgJyk7XG4gICAgICByZW1vdmVkID0gcmVtb3ZlZC5yZXBsYWNlKC8oXlxccyspfChcXHMrJCkvZywgJycpO1xuICAgICAgZWwuY2xhc3NOYW1lID0gcmVtb3ZlZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogW2lmIGVsZW1lbnQgaGFzIHNvbWUgY2xhc3NdXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWwge09iamVjdH0gICAtLSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBjbHMge1N0cmluZ30gIC0tIGNsYXNzZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuICB7Qm9vbGVhbn0gICAtLSB0cnVlIG9yIGZhbHNlLlxuICAgICAqL1xuICAgIGhhc0NsYXNzOiBmdW5jdGlvbihlbCwgY2xzKSB7XG4gICAgICB2YXIgZWxDbGFzcyA9IGVsLmNsYXNzTmFtZTtcbiAgICAgIHZhciBlbENsYXNzTGlzdCA9IGVsQ2xhc3Muc3BsaXQoL1xccysvKTtcbiAgICAgIHZhciB4ID0gMDtcbiAgICAgIGZvcih4IGluIGVsQ2xhc3NMaXN0KSB7XG4gICAgICAgIGlmKGVsQ2xhc3NMaXN0W3hdID09IGNscykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFthZGQgZXZlbnQgdG8gc29tZSBlbGVtZW50LCBkb20wLCBkb20xLCBzdXBwb3J0cyBmdWNrIGllXVxuICAgICAqXG4gICAgICogQHBhcmFtIGVsIHtPYmplY3R9ICAgICAgIC0tIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHR5cGUge1N0cmluZ30gICAgIC0tIGV2ZW50IHR5cGUsIHN1Y2ggYXMgJ2NsaWNrJywgJ21vdXNlb3ZlcicuXG4gICAgICogQHBhcmFtIGZ1bmMge0Z1bmN0aW9ufSAgIC0tIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICovXG4gICAgYWRkRXZlbnQ6IGZ1bmN0aW9uKGVsLCB0eXBlLCBmdW5jKSB7XG4gICAgwqDCoGlmKGVsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICDCoMKgwqDCoGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYywgZmFsc2UpO1xuICAgIMKgwqB9IGVsc2UgaWYoZWwuYXR0YWNoRXZlbnQpeyBcbiAgICDCoMKgwqDCoGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCBmdW5jKTtcbiAgICDCoMKgfSBlbHNleyBcbiAgICDCoMKgwqDCoGVsWydvbicgKyB0eXBlXSA9IGZ1bmM7IFxuICAgIMKgwqB9wqAgXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFtyZW1vdmUgZXZlbnQgdG8gc29tZSBlbGVtZW50LCBkb20wLCBkb20xLCBzdXBwb3J0cyBmdWNrIGllXVxuICAgICAqXG4gICAgICogQHBhcmFtIGVsIHtPYmplY3R9ICAgICAgIC0tIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHR5cGUge1N0cmluZ30gICAgIC0tIGV2ZW50IHR5cGUsIHN1Y2ggYXMgJ2NsaWNrJywgJ21vdXNlb3ZlcicuXG4gICAgICogQHBhcmFtIGZ1bmMge0Z1bmN0aW9ufSAgIC0tIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICovXG4gICAgcmVtb3ZlRXZlbnQ6IGZ1bmN0aW9uKGVsLCB0eXBlLCBmdW5jKSB7XG4gICAgwqDCoGlmIChlbC5yZW1vdmVFdmVudExpc3RlbmVyKXsgXG4gICAgwqDCoMKgwqBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmMsIGZhbHNlKTtcbiAgICDCoMKgfSBlbHNlIGlmIChlbC5kZXRhY2hFdmVudCl7XG4gICAgwqDCoMKgwqBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgZnVuYyk7XG4gICAgwqDCoH0gZWxzZSB7XG4gICAgwqDCoMKgwqBkZWxldGUgZWxbJ29uJyArIHR5cGVdO1xuICAgIMKgwqB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFtSZW1vdmUgZWxlbWVudCBub2RlXVxuICAgICAqXG4gICAgICogQHBhcmFtIGVsIHtPYmplY3R9ICAgLS0gZWxlbWVudC5cbiAgICAgKlxuICAgICAqL1xuICAgIHJlbW92ZUVsZW1lbnQ6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAoZWwgJiYgZWwucGFyZW50Tm9kZSkgJiYgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFtTZXQgdW5pcXVlIGlkXVxuICAgICAqXG4gICAgICogQHBhcmFtIHByZWZpeCB7U3RyaW5nfSAgIC0tIGlkIHByZWZpeCBuYW1lLlxuICAgICAqXG4gICAgICogQHJldHVybiAge1N0cmluZ31cbiAgICAgKi9cbiAgICBzZXRVaWQ6IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgICAgZG8gcHJlZml4ICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAgICAgd2hpbGUgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZWZpeCkpO1xuICAgICAgcmV0dXJuIHByZWZpeDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFtBbGVydGl5IHB1YmxpYyBBUEldXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHZhciBBbGVydHkgPSBmdW5jdGlvbigpIHtcblxuICAgIC8vIHByaXZhdGUgb2JqZWN0IGZvciBBbGVydHkgb2JqZWN0IGluaGVyaXRcbiAgICB2YXIgRGlhbG9nID0ge1xuICAgICAgXG4gICAgICAvLyBzdGF0aWMgZGVmYXVsdHMgcGFyYW1zXG4gICAgICBkZWZhdWx0czoge1xuICAgICAgICBva0xhYmVsOiAnXFx1Nzg2ZVxcdTViOWEnLFxuICAgICAgICBjYW5jZWxMYWJlbDogJ1xcdTUzZDZcXHU2ZDg4JyxcbiAgICAgICAgdGltZTogMjAwMFxuICAgICAgfSxcblxuICAgICAgcHJldmlvdXNDYWxsYmFjazogbnVsbCwgIC8vIGZvciBjYWNoZSBwcmV2aW91cyB0b2FzdHMgY2FsbGJhaywgdG8gaGFuZGxlIGlmIGNhbGwgbW9yZSB0aGFuIDEgYWxlcnR5XG5cbiAgICAgIC8vIGh0bWwgdGVtcGxhdGVzXG4gICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJhbGVydHktb3ZlcmxheVwiIHRhYmluZGV4PVwiLTFcIj48L2Rpdj4nK1xuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnR5XCI+JytcbiAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnR5LXRpdGxlXCI+PC9kaXY+JytcbiAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnR5LWNvbnRlbnRcIj4nK1xuICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJhbGVydHktbWVzc2FnZVwiPjwvcD4nK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0eS1wcm9tcHRcIj4nK1xuICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIlwiIHZhbHVlPVwiXCI+JytcbiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImlucHV0LWxpbmVcIj48L2Rpdj4nK1xuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JytcbiAgICAgICAgICAgICAgICAgICc8L2Rpdj4nK1xuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydHktYWN0aW9uXCI+JytcbiAgICAgICAgICAgICAgICAgICAgJzxhIGNsYXNzPVwiYnRuLWNhbmNlbFwiPjwvYT4nK1xuICAgICAgICAgICAgICAgICAgICAnPGEgY2xhc3M9XCJidG4tb2tcIj48L2E+JytcbiAgICAgICAgICAgICAgICAgICc8L2Rpdj4nK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nLFxuXG5cblxuICAgICAgLyoqIFxuICAgICAgICogW0J1aWxkIHRoZSBIVE1MIGNvbnRlbnRzXVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB0eXBlIHtTdHJpbmd9ICAgICAgICAgICAtLSBnZXQgdGhlIGRpYWxvZyB0eXBlIHRvIGFycmFuZ2UgdGhlIGNvcnJlc3BvbmRlbnQgaHRtbCBjb250ZW50LlxuICAgICAgICogQHBhcmFtIGNvbnRlbnQge1N0cmluZ30gICAgICAgIC0tIHRoZSB0ZXh0IGNvbnRlbnRzIGRpYWxvZyB0byB1c2Vycy5cbiAgICAgICAqIEBwYXJhbSBvcHRzIHtPYmplY3R9ICAgICAgICAgICAtLSBvcHRpb25zLlxuICAgICAgICogQHBhcmFtIG9uT2sge0Z1bmN0aW9ufSAgICAgICAgIC0tIGN1c3RvbSBjYWxsYmFjayBmdW5jdGlvbiBhZnRlciBjbGljayBvayBidXR0b24uXG4gICAgICAgKiBAcGFyYW0gb25DYW5jZWwge0Z1bmN0aW9ufSAgICAgLS0gY3VzdG9tIGNhbGxiYWNrIGZ1bmN0aW9uIGFmdGVyIGNsaWNrIGNhbmNlbCBidXR0b24uXG4gICAgICAgKi9cbiAgICAgIHNldHVwOiBmdW5jdGlvbih0eXBlLCBjb250ZW50LCBvcHRzLCBvbk9rLCBvbkNhbmNlbCkge1xuICAgICAgICAvLyBmb3IgaWYgYXJndW1lbnQgb3B0cyBpcyBub3QgZ2l2ZW4uXG4gICAgICAgIHZhciBkZXRlY3QgPSB0eXBlb2Ygb3B0cyA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgICAgaWYgKGRldGVjdCkge1xuICAgICAgICAgIG9uQ2FuY2VsID0gb25PaztcbiAgICAgICAgICBvbk9rID0gb3B0cztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkb2xkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnR5Jyk7XG5cblxuICAgICAgICAvLyBpZiBwcmV2aW91cyBtb2RhbCBpcyBvcGVuLCByZW1vdmUgaXQgYW5kIGltbWVkaWF0ZWx5IGNhbGxiYWNrXG4gICAgICAgIGlmICgkb2xkTW9kYWwpIHtcbiAgICAgICAgICBjb21tb25Vc2UucmVtb3ZlRWxlbWVudCgkb2xkTW9kYWwpO1xuICAgICAgICAgIHZhciBfY2FsbGJhY2sgPSB0aGlzLnByZXZpb3VzQ2FsbGJhY2s7XG4gICAgICAgICAgaWYgKF9jYWxsYmFjaykgX2NhbGxiYWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgJHdyYXBwZXIuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZTtcblxuICAgICAgICAvLyBhcHBlbmQgYWxlcnR5IHRvIGJvZHlcbiAgICAgICAgd2hpbGUgKCR3cmFwcGVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCR3cmFwcGVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2FjaGUgYWxlcnR5IGRvbSBmb3IgbmV4dCB1c2VcbiAgICAgICAgdmFyICRtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydHknKTtcbiAgICAgICAgdmFyICRvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0eS1vdmVybGF5Jyk7XG4gICAgICAgIHZhciAkdGl0bGUgPSAkbW9kYWwucXVlcnlTZWxlY3RvcignLmFsZXJ0eS10aXRsZScpO1xuICAgICAgICB2YXIgJG1lc3NhZ2UgPSAkbW9kYWwucXVlcnlTZWxlY3RvcignLmFsZXJ0eS1tZXNzYWdlJyk7XG4gICAgICAgIHZhciAkYnRuQXJlYSA9ICRtb2RhbC5xdWVyeVNlbGVjdG9yKCcuYWxlcnR5LWFjdGlvbicpO1xuICAgICAgICB2YXIgJGJ0bk9rID0gJG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5idG4tb2snKTtcbiAgICAgICAgdmFyICRidG5DYW5jZWwgPSAkbW9kYWwucXVlcnlTZWxlY3RvcignLmJ0bi1jYW5jZWwnKTtcbiAgICAgICAgdmFyICRwcm9tcHQgPSAkbW9kYWwucXVlcnlTZWxlY3RvcignLmFsZXJ0eS1wcm9tcHQnKTtcbiAgICAgICAgdmFyICRpbnB1dCA9ICRwcm9tcHQucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcblxuICAgICAgICAvLyBzZXQgdWlkXG4gICAgICAgICRtb2RhbC5pZCA9IGNvbW1vblVzZS5zZXRVaWQoJ2FsZXJ0eScpO1xuICAgICAgICAkb3ZlcmxheS5pZCA9ICdvdmVybGF5LScrJG1vZGFsLmlkO1xuXG4gICAgICAgIC8vIGFuaW1hdGlvbiBzaG93IGFsZXJ0eVxuICAgICAgICBjb21tb25Vc2UuYWRkQ2xhc3MoJG92ZXJsYXksICdhY3RpdmUnKTtcbiAgICAgICAgY29tbW9uVXNlLmFkZENsYXNzKCRtb2RhbCwgJ2FsZXJ0eS1zaG93Jyk7XG4gICAgICAgICRtZXNzYWdlLmlubmVySFRNTCA9IGNvbnRlbnQ7ICAvLyBzZXQgbXNnXG5cbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy50aW1lKSB0aGlzLmRlZmF1bHRzLnRpbWUgPSBvcHRzLnRpbWU7IC8vIGhhbmRsZSB0aW1lIGlmIHNldFxuXG4gICAgICAgIGlmICh0eXBlICE9PSAncHJvbXB0Jykge1xuICAgICAgICAgIGNvbW1vblVzZS5yZW1vdmVFbGVtZW50KCRwcm9tcHQpOyAvLyBvdGhlciB0eXBlIGRvIG5vdCBuZWVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGlucHV0LmZvY3VzKCk7IC8vIGF1dG8gZm9jdXMgaW5wdXQgaWYgdHlwZSBwcm9tcHRcblxuICAgICAgICAgIGlmKG9wdHMgJiYgb3B0cy5pbnB1dFR5cGUpICRpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCBvcHRzLmlucHV0VHlwZSk7IC8vIGhhbmRsZSBpbnB1dCB0eXBlLCBzdWNoIGFzICdwYXNzd29yZCdcbiAgICAgICAgICBpZihvcHRzICYmIG9wdHMuaW5wdXRQbGFjZWhvbGRlcikgJGlucHV0LnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBvcHRzLmlucHV0UGxhY2Vob2xkZXIpOyAvLyBoYW5kbGUgaW5wdXQgcGxhY2Vob2xkZXJcbiAgICAgICAgICBpZihvcHRzICYmIG9wdHMuaW5wdXRWYWx1ZSkgJGlucHV0LnNldEF0dHJpYnV0ZSgndmFsdWUnLCBvcHRzLmlucHV0VmFsdWUpOyAvLyBoYW5kbGUgaW5wdXQgZGVmYXVsdCB2YWx1ZSBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlID09PSAndG9hc3RzJykge1xuICAgICAgICAgIHRoaXMucHJldmlvdXNDYWxsYmFjayA9IG9uT2s7ICAvLyBjYWNoZSBjYWxsYmFja1xuXG4gICAgICAgICAgLy8gcmVhcnJhbmdlIHRlbXBsYXRlXG4gICAgICAgICAgY29tbW9uVXNlLnJlbW92ZUVsZW1lbnQoJHRpdGxlKTtcbiAgICAgICAgICBjb21tb25Vc2UucmVtb3ZlRWxlbWVudCgkYnRuQXJlYSk7XG4gICAgICAgICAgY29tbW9uVXNlLnJlbW92ZUVsZW1lbnQoJG92ZXJsYXkpO1xuICAgICAgICAgIGNvbW1vblVzZS5hZGRDbGFzcygkbW9kYWwsICd0b2FzdHMnKTtcblxuICAgICAgICAgIGlmIChvcHRzICYmIG9wdHMucGxhY2UgPT09ICd0b3AnKSBjb21tb25Vc2UuYWRkQ2xhc3MoJG1vZGFsLCAncGxhY2UtdG9wJyk7IC8vIGhhbmRsZSB0b2FzdHMgdG9wIHBsYWNlXG4gICAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5iZ0NvbG9yKSAkbW9kYWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gb3B0cy5iZ0NvbG9yO1xuICAgICAgICAgIGlmIChvcHRzICYmIG9wdHMuZm9udENvbG9yKSAkbWVzc2FnZS5zdHlsZS5jb2xvciA9b3B0cy5mb250Q29sb3I7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb21tb25Vc2UuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ25vLXNjcm9sbGluZycpOyAvLyBib2R5IG5vIHNjb3JsbFxuICAgICAgICAgIChvcHRzICYmIG9wdHMudGl0bGUpID8gJHRpdGxlLmlubmVySFRNTCA9IG9wdHMudGl0bGUgOiBjb21tb25Vc2UucmVtb3ZlRWxlbWVudCgkdGl0bGUpOyAvLyBoYW5kbGUgdGl0bGUgaWYgc2V0XG4gICAgICAgICAgKG9wdHMgJiYgb3B0cy5va0xhYmVsKSA/ICRidG5Pay5pbm5lckhUTUwgPSBvcHRzLm9rTGFiZWwgOiAkYnRuT2suaW5uZXJIVE1MID0gdGhpcy5kZWZhdWx0cy5va0xhYmVsOyAvLyBoYW5kbGUgb2sgdGV4dCBpZiBzZXRcbiAgICAgICAgICAkbW9kYWwuc3R5bGUubWFyZ2luVG9wID0gIC0gJG1vZGFsLm9mZnNldEhlaWdodCAvIDIgKyAncHgnOyAvLyBzZXQgdGhlIHBsYWNlIHRvIGNlbnRlciB1c2luZyBtYXJnaW4tdG9wO1xuXG4gICAgICAgICAgaWYgKHR5cGUgPT09ICdjb25maXJtJyB8fCB0eXBlID09PSAncHJvbXB0Jykge1xuICAgICAgICAgICAgKG9wdHMgJiYgb3B0cy5jYW5jZWxMYWJlbCkgPyAkYnRuQ2FuY2VsLmlubmVySFRNTCA9IG9wdHMuY2FuY2VsTGFiZWwgOiAkYnRuQ2FuY2VsLmlubmVySFRNTCA9IHRoaXMuZGVmYXVsdHMuY2FuY2VsTGFiZWw7IC8vIGhhbmRsZSBjYW5jZWwgdGV4dCBpZiBzZXRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tbW9uVXNlLnJlbW92ZUVsZW1lbnQoJGJ0bkNhbmNlbCk7IC8vIHRvYXN0cyBhbmQgYWxlcnkgdHlwZSBkbyBub3QgbmVlZCBjYW5jZWwgYnRuXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iaW5kRXZlbnQoJG1vZGFsLCBvbk9rLCBvbkNhbmNlbCk7IC8vIHNlZSBuZXh0XG4gICAgICB9LFxuXG4gICAgICAvKiogXG4gICAgICAgKiBbQmluZCBldmVudCB0byBkaWFsb2ddXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtICRtb2RhbCB7T2JqZWN0fSAgICAgICAtLSBtb2RhbCBub2RlLlxuICAgICAgICogQHBhcmFtOiBvbk9rIHtGdW5jdGlvbn0gICAgICAtLSBvayBjYWxsYmFjay5cbiAgICAgICAqIEBwYXJhbTogb25DYW5jZWwge0Z1bmN0aW9ufSAgLS0gY2FuY2VsIGNhbGxiYWNrLlxuICAgICAgICovXG4gICAgICBiaW5kRXZlbnQ6IGZ1bmN0aW9uKCRtb2RhbCwgb25Paywgb25DYW5jZWwpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICB2YXIgJGJ0bk9rID0gJG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5idG4tb2snKTtcbiAgICAgICAgdmFyICRidG5DYW5jZWwgPSAkbW9kYWwucXVlcnlTZWxlY3RvcignLmJ0bi1jYW5jZWwnKTtcblxuICAgICAgICAvLyB0b2FzdHMgZGVsYXkgaGlkZVxuICAgICAgICBpZiAoY29tbW9uVXNlLmhhc0NsYXNzKCRtb2RhbCwgJ3RvYXN0cycpKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGlmIHRvYXN0cyBoYXMgYmVlbiByZW1vdmVkXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJG1vZGFsLmlkKSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgICAgdGhhdC5jbG9zZSgkbW9kYWwsIG9uT2spO1xuICAgICAgICAgIH0sIHRoYXQuZGVmYXVsdHMudGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2xpY2sgb2sgYnV0dG9uXG4gICAgICAgIGlmICgkYnRuT2spIHtcbiAgICAgICAgICBjb21tb25Vc2UuYWRkRXZlbnQoJGJ0bk9rLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoYXQuY2xvc2UoJG1vZGFsLCBvbk9rKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbGljayBjYW5jZWwgYnV0dG9uXG4gICAgICAgIGlmICgkYnRuQ2FuY2VsKSB7XG4gICAgICAgICAgY29tbW9uVXNlLmFkZEV2ZW50KCRidG5DYW5jZWwsICdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5jbG9zZSgkbW9kYWwsIG9uQ2FuY2VsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqIFxuICAgICAgICogW0Nsb3NlIHRoZSBhY3RpdmVkIG1vZGFsIGFuZCByZW1vdmUgaXRdXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtOiAkbW9kYWwge09iZWpjdH0gIC0tIG1vZGFsIGVsZW1lbnQgdG8gcmVtb3ZlLlxuICAgICAgICogQHBhcmFtOiBjYWxsYmFjayB7RnVuY3Rpb259ICAtLSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgICAqL1xuICAgICAgY2xvc2U6IGZ1bmN0aW9uKCRtb2RhbCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyICRpbnB1dCA9ICRtb2RhbC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgICAgICB2YXIgJG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3ZlcmxheS0nKyRtb2RhbC5pZCk7XG5cbiAgICAgICAgLy8gaGlkZSBhbGVydHkgd2l0aCBhbmltYXRpb25cbiAgICAgICAgY29tbW9uVXNlLnJlbW92ZUNsYXNzKCRtb2RhbCwgJ2FsZXJ0eS1zaG93Jyk7XG4gICAgICAgIGNvbW1vblVzZS5hZGRDbGFzcygkbW9kYWwsICdhbGVydHktaGlkZScpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBhbGVydHkgYW5kIG90aGVyIGFkZGVkIGVsZW1lbnRzXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAkb3ZlcmxheSAmJiBjb21tb25Vc2UucmVtb3ZlQ2xhc3MoJG92ZXJsYXksICdhY3RpdmUnKSwgY29tbW9uVXNlLnJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksICduby1zY3JvbGxpbmcnKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb21tb25Vc2UucmVtb3ZlRWxlbWVudCgkbW9kYWwpO1xuICAgICAgICAgIGNvbW1vblVzZS5yZW1vdmVFbGVtZW50KCRvdmVybGF5KTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgISRpbnB1dCA/IGNhbGxiYWNrKCkgOiBjYWxsYmFjaygkaW5wdXQudmFsdWUpOyAgLy8gaGFuZGxlIHByb21wdCB0eXBlLCBjYWxsYmFjayB0aGUgaW5wdXQgdmFsdWVcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LDEwMCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAvLyByZXR1cm4gYWxlcnR5LnRvYXN0cygpO1xuICAgICAgdG9hc3RzOiBmdW5jdGlvbihjb250ZW50LCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgICBEaWFsb2cuc2V0dXAoJ3RvYXN0cycsIGNvbnRlbnQsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIHJldHVybiBhbGVydHkuYWxlcnQoKTtcbiAgICAgIGFsZXJ0OiBmdW5jdGlvbihjb250ZW50LCBvcHRzLCBvbk9rKSB7XG4gICAgICAgIERpYWxvZy5zZXR1cCgnYWxlcnQnLCBjb250ZW50LCBvcHRzLCBvbk9rKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIHJldHVybiBhbGVydHkuY29uZmlybSgpO1xuICAgICAgY29uZmlybTogZnVuY3Rpb24oY29udGVudCwgb3B0cywgb25Paywgb25DYW5jZWwpIHtcbiAgICAgICAgRGlhbG9nLnNldHVwKCdjb25maXJtJywgY29udGVudCwgb3B0cywgb25Paywgb25DYW5jZWwpO1xuICAgICAgfSxcblxuICAgICAgLy8gcmV0dXJuIGFsZXJ0eS5wcm9tcHQoKTtcbiAgICAgIHByb21wdDogZnVuY3Rpb24oY29udGVudCwgb3B0cywgb25Paywgb25jYW5jZWwpIHtcbiAgICAgICAgRGlhbG9nLnNldHVwKCdwcm9tcHQnLCBjb250ZW50LCBvcHRzLCBvbk9rLCBvbmNhbmNlbCk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICB3aW5kb3cuYWxlcnR5ID0gbmV3IEFsZXJ0eSgpO1xuXG59KCkpOyJdfQ=="}