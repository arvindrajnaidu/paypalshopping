{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/contentscript.js","src/scripts/utils/ext.js"],"names":[],"mappings":"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","file":"contentscript.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import ext from \"./utils/ext\"\n\nvar port = ext.runtime.connect();\n\nlet ecToken\nlet merchantWin\nlet clientId\n\nfunction onRequest(request, sender, sendResponse) {\n\tif (window.location === window.parent.location) {\n\t\tconsole.log(request, sender, ecToken, '<<<<<<<<<<<<<<<<<<<')\n\t\tif (request.action === 'getECToken') {\n\t\t\tsendResponse({ecToken})\n\t\t\treturn false\n\t\t}\telse if (request.extAction === 'approve') {\n\t\t\tdelete request.extAction\n\t\t\tconsole.log(request, 'All the cool data')\n\t\t\tmerchantWin.postMessage({ type: \"PP_APPROVAL\", data: request }, \"*\")\n\t\t\treturn false\n\t\t}\t\n\t}\n\treturn true\n}\n\nconst showXO = (data, sendApproval) => {\n\tconst {payer_info} = data.payer\n\tlet xoUrl = `https://www.paypal.com/webapps/hermes?locale.x=en_US&fundingSource=paypal&env=production&fundingOffered=paypal&logLevel=warn&sdkMeta=eyJ1cmwiOiJodHRwczovL3d3dy5wYXlwYWxvYmplY3RzLmNvbS9hcGkvY2hlY2tvdXQubWluLmpzIn0%3D&version=min&token=${ecToken}`\n  \talerty.confirm(\n\t  `<div>\n\t  \t\tShipping to ${payer_info.shipping_address.line1}\n\t  </div>\n\t  <div>\n\t  \t\tShall we fast checkout?\n\t  </div>\n\t  `,\n\t  {\n\t  \ttitle: `Hi ${payer_info.first_name}`,\n\t  \tokLabel: 'Okay',\n\t  \tcancelLabel: 'Not Now'\n\t  },\n\t  sendApproval\n\t)\n}\n\nconst infiltrate = () => {\n\tvar actualCode = '(' + function() {\n\t\t\twindow._oldxprops = window.xprops;\n\t\t\twindow.xprops.onAuthorize = function () {\n\t\t\t\tconsole.log(arguments, 'Args')\n\t\t\t\twindow._oldxprops.onAuthorize.apply(this, arguments)\n\t\t\t}\n\t} + ')();';\n\n\tvar script = document.createElement('script');\n\tscript.textContent = actualCode;\n\t(document.head||document.documentElement).appendChild(script);\n\tscript.remove();\t\n}\n\nconst getECToken = () => {\n\tvar actualCode = '(' + function() {\n\t    window.xprops && window.xprops.payment()\n\t    \t.then((ecToken) => {\n\t    \t\tconsole.log(ecToken, 'ECTOKEN')\n\t\t \t\tvar evt = document.createEvent(\"CustomEvent\");\n\t\t\t\tevt.initCustomEvent(\"EC_TOKEN\", true, true, ecToken);\n\t\t\t\tdocument.dispatchEvent(evt);\n\t    \t})\n\t} + ')();';\n\n\tvar script = document.createElement('script');\n\tscript.textContent = actualCode;\n\t(document.head||document.documentElement).appendChild(script);\n\tscript.remove();\t\n}\n\nconst setApproval = (data) => {\n\tvar actualCode = `(function() {\n\t    window.xprops && window.xprops.onAuthorize(${data}, {\n\t    \tpayment: {\n\t    \t\tget: () => {\n\t    \t\t\treturn new Promise(function(resolve) {\n    \t\t\t\t\tresolve(${data});\n\t\t\t\t\t});\n\t    \t\t}\n\t    \t}\n\t    })\n\t})();`;\n\n\tvar script = document.createElement('script');\n\tscript.textContent = actualCode;\n\t(document.head||document.documentElement).appendChild(script);\n\tscript.remove();\t\n}\n\nif (window.location.hostname.indexOf('www.paypal.com') > -1) {\n\tdocument.addEventListener('EC_TOKEN', (e) => {\n\t  var data = e.detail;\n\t  console.log(\"received \" + data)\n\t  window.top.postMessage({ type: \"ECTOKEN\", ecToken: data }, \"*\")\n\t})\n\n\twindow.addEventListener('message', (e) => {\n\t\tif (e.data && e.data.type === 'PP_APPROVAL') {\n\t\t\tsetApproval(JSON.stringify(e.data.data))\n\t\t}\n\t})\n\n\t// infiltrate()\n\tgetECToken()\n} else if (window.top == window.self) {\n\n\twindow.addEventListener('message', (e) => {\n\t\tif (e.data && e.data.type === 'ECTOKEN') {\n\t\t\tecToken = e.data.ecToken\n\t\t\tmerchantWin = e.source\n\n\t\t\text.runtime.sendMessage(\n\t\t\t\t{contentScriptQuery: 'approveEC', ecToken},\n\t\t\t\tdata => {\n\t\t\t\t\tconsole.log(data, 'Approved')\n\t\t\t\t\t// data.intent = 'sale'\n\t\t\t\t\t// showXO(data, () => {\n\t\t\t\t\t// \tconsole.log('Posting Approval')\n\t\t\t\t\t// \te.source.postMessage({ type: \"PP_APPROVAL\", data }, \"*\")\n\t\t\t\t\t// })\n\t\t\t\t});\n\n\t\t\t// fetch(`https://www.paypal.com/shoplist/xo/approve?ecToken=${ecToken}`, {\n\t\t\t// \theaders: {\n\t\t\t// \t\t'Content-Type': 'application/json'\n\t\t\t// \t}\n\t\t\t// })\n\t\t\t// .then(function(response) {\n\t\t\t// \t\tdebugger\n\t\t\t// \t\treturn response.json()\n\t\t\t// })\n\t\t\t// .then(function(data) {\n\t\t\t// \tconsole.log(data, 'Approved')\n\t\t\t// \tdata.intent = 'sale'\n\n\t\t\t// \tshowXO(data, () => {\n\t\t\t// \t\tconsole.log('Posting Approval')\n\t\t\t// \t\te.source.postMessage({ type: \"PP_APPROVAL\", data }, \"*\")\n\t\t\t// \t})\n\t\t\t// })\n\t\t\t// .catch(console.log)\n\t\t} else if (e.data && e.data.type === 'CLIENTID') {\n\t\t\tclientId = e.data.clientId\n\t\t\tconsole.log('CLIENTID IS: ', clientId)\n\t\t}\n\t})\n}\n\next.runtime.onMessage.addListener(onRequest);\n\n// ext.webRequest.onBeforeRequest.addListener(\n//   function(details) { \n//     console.log('Cancelling')\n//     return { cancel: true }; \n//   },\n//   {\n//     urls: [\"*://www.paypal.com/*\"\n//   ]},\n//   [\"blocking\"]\n// );\n","const apis = [\n  'alarms',\n  'bookmarks',\n  'browserAction',\n  'commands',\n  'contextMenus',\n  'cookies',\n  'downloads',\n  'events',\n  'extension',\n  'extensionTypes',\n  'history',\n  'i18n',\n  'idle',\n  'notifications',\n  'pageAction',\n  'runtime',\n  'storage',\n  'tabs',\n  'webNavigation',\n  'webRequest',\n  'windows',\n]\n\nfunction Extension () {\n  const _this = this\n\n  apis.forEach(function (api) {\n\n    _this[api] = null\n\n    try {\n      if (chrome[api]) {\n        _this[api] = chrome[api]\n      }\n    } catch (e) {}\n\n    try {\n      if (window[api]) {\n        _this[api] = window[api]\n      }\n    } catch (e) {}\n\n    try {\n      if (browser[api]) {\n        _this[api] = browser[api]\n      }\n    } catch (e) {}\n    try {\n      _this.api = browser.extension[api]\n    } catch (e) {}\n  })\n\n  try {\n    if (browser && browser.runtime) {\n      this.runtime = browser.runtime\n    }\n  } catch (e) {}\n\n  try {\n    if (browser && browser.browserAction) {\n      this.browserAction = browser.browserAction\n    }\n  } catch (e) {}\n\n}\n\nmodule.exports = new Extension();"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9jb250ZW50c2NyaXB0LmpzIiwic3JjL3NjcmlwdHMvdXRpbHMvZXh0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7Ozs7O0FBRUEsSUFBSSxPQUFPLGNBQUksT0FBSixDQUFZLE9BQVosRUFBWDs7QUFFQSxJQUFJLGdCQUFKO0FBQ0EsSUFBSSxvQkFBSjtBQUNBLElBQUksaUJBQUo7O0FBRUEsU0FBUyxTQUFULENBQW1CLE9BQW5CLEVBQTRCLE1BQTVCLEVBQW9DLFlBQXBDLEVBQWtEO0FBQ2pELEtBQUksT0FBTyxRQUFQLEtBQW9CLE9BQU8sTUFBUCxDQUFjLFFBQXRDLEVBQWdEO0FBQy9DLFVBQVEsR0FBUixDQUFZLE9BQVosRUFBcUIsTUFBckIsRUFBNkIsT0FBN0IsRUFBc0MscUJBQXRDO0FBQ0EsTUFBSSxRQUFRLE1BQVIsS0FBbUIsWUFBdkIsRUFBcUM7QUFDcEMsZ0JBQWEsRUFBQyxnQkFBRCxFQUFiO0FBQ0EsVUFBTyxLQUFQO0FBQ0EsR0FIRCxNQUdPLElBQUksUUFBUSxTQUFSLEtBQXNCLFNBQTFCLEVBQXFDO0FBQzNDLFVBQU8sUUFBUSxTQUFmO0FBQ0EsV0FBUSxHQUFSLENBQVksT0FBWixFQUFxQixtQkFBckI7QUFDQSxlQUFZLFdBQVosQ0FBd0IsRUFBRSxNQUFNLGFBQVIsRUFBdUIsTUFBTSxPQUE3QixFQUF4QixFQUFnRSxHQUFoRTtBQUNBLFVBQU8sS0FBUDtBQUNBO0FBQ0Q7QUFDRCxRQUFPLElBQVA7QUFDQTs7QUFFRCxJQUFNLFNBQVMsU0FBVCxNQUFTLENBQUMsSUFBRCxFQUFPLFlBQVAsRUFBd0I7QUFBQSxLQUMvQixVQUQrQixHQUNqQixLQUFLLEtBRFksQ0FDL0IsVUFEK0I7O0FBRXRDLEtBQUksdVBBQXFQLE9BQXpQO0FBQ0UsUUFBTyxPQUFQLGlDQUVnQixXQUFXLGdCQUFYLENBQTRCLEtBRjVDLGlG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QUFDcEIsTUFBTSxRQUFRLElBQWQ7O0FBRUEsT0FBSyxPQUFMLENBQWEsVUFBVSxHQUFWLEVBQWU7O0FBRTFCLFVBQU0sR0FBTixJQUFhLElBQWI7O0FBRUEsUUFBSTtBQUNGLFVBQUksT0FBTyxHQUFQLENBQUosRUFBaUI7QUFDZixjQUFNLEdBQU4sSUFBYSxPQUFPLEdBQVAsQ0FBYjtBQUNEO0FBQ0YsS0FKRCxDQUlFLE9BQU8sQ0FBUCxFQUFVLENBQUU7O0FBRWQsUUFBSTtBQUNGLFVBQUksT0FBTyxHQUFQLENBQUosRUFBaUI7QUFDZixjQUFNLEdBQU4sSUFBYSxPQUFPLEdBQVAsQ0FBYjtBQUNEO0FBQ0YsS0FKRCxDQUlFLE9BQU8sQ0FBUCxFQUFVLENBQUU7O0FBRWQsUUFBSTtBQUNGLFVBQUksUUFBUSxHQUFSLENBQUosRUFBa0I7QUFDaEIsY0FBTSxHQUFOLElBQWEsUUFBUSxHQUFSLENBQWI7QUFDRDtBQUNGLEtBSkQsQ0FJRSxPQUFPLENBQVAsRUFBVSxDQUFFO0FBQ2QsUUFBSTtBQUNGLFlBQU0sR0FBTixHQUFZLFFBQVEsU0FBUixDQUFrQixHQUFsQixDQUFaO0FBQ0QsS0FGRCxDQUVFLE9BQU8sQ0FBUCxFQUFVLENBQUU7QUFDZixHQXhCRDs7QUEwQkEsTUFBSTtBQUNGLFFBQUksV0FBVyxRQUFRLE9BQXZCLEVBQWdDO0FBQzlCLFdBQUssT0FBTCxHQUFlLFFBQVEsT0FBdkI7QUFDRDtBQUNGLEdBSkQsQ0FJRSxPQUFPLENBQVAsRUFBVSxDQUFFOztBQUVkLE1BQUk7QUFDRixRQUFJLFdBQVcsUUFBUSxhQUF2QixFQUFzQztBQUNwQyxXQUFLLGFBQUwsR0FBcUIsUUFBUSxhQUE3QjtBQUNEO0FBQ0YsR0FKRCxDQUlFLE9BQU8sQ0FBUCxFQUFVLENBQUU7QUFFZjs7QUFFRCxPQUFPLE9BQVAsR0FBaUIsSUFBSSxTQUFKLEVBQWpCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IGV4dCBmcm9tIFwiLi91dGlscy9leHRcIlxuXG52YXIgcG9ydCA9IGV4dC5ydW50aW1lLmNvbm5lY3QoKTtcblxubGV0IGVjVG9rZW5cbmxldCBtZXJjaGFudFdpblxubGV0IGNsaWVudElkXG5cbmZ1bmN0aW9uIG9uUmVxdWVzdChyZXF1ZXN0LCBzZW5kZXIsIHNlbmRSZXNwb25zZSkge1xuXHRpZiAod2luZG93LmxvY2F0aW9uID09PSB3aW5kb3cucGFyZW50LmxvY2F0aW9uKSB7XG5cdFx0Y29uc29sZS5sb2cocmVxdWVzdCwgc2VuZGVyLCBlY1Rva2VuLCAnPDw8PDw8PDw8PDw8PDw8PDw8PCcpXG5cdFx0aWYgKHJlcXVlc3QuYWN0aW9uID09PSAnZ2V0RUNUb2tlbicpIHtcblx0XHRcdHNlbmRSZXNwb25zZSh7ZWNUb2tlbn0pXG5cdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHR9XHRlbHNlIGlmIChyZXF1ZXN0LmV4dEFjdGlvbiA9PT0gJ2FwcHJvdmUnKSB7XG5cdFx0XHRkZWxldGUgcmVxdWVzdC5leHRBY3Rpb25cblx0XHRcdGNvbnNvbGUubG9nKHJlcXVlc3QsICdBbGwgdGhlIGNvb2wgZGF0YScpXG5cdFx0XHRtZXJjaGFudFdpbi5wb3N0TWVzc2FnZSh7IHR5cGU6IFwiUFBfQVBQUk9WQUxcIiwgZGF0YTogcmVxdWVzdCB9LCBcIipcIilcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH1cdFxuXHR9XG5cdHJldHVybiB0cnVlXG59XG5cbmNvbnN0IHNob3dYTyA9IChkYXRhLCBzZW5kQXBwcm92YWwpID0+IHtcblx0Y29uc3Qge3BheWVyX2luZm99ID0gZGF0YS5wYXllclxuXHRsZXQgeG9VcmwgPSBgaHR0cHM6Ly93d3cucGF5cGFsLmNvbS93ZWJhcHBzL2hlcm1lcz9sb2NhbGUueD1lbl9VUyZmdW5kaW5nU291cmNlPXBheXBhbCZlbnY9cHJvZHVjdGlvbiZmdW5kaW5nT2ZmZXJlZD1wYXlwYWwmbG9nTGV2ZWw9d2FybiZzZGtNZXRhPWV5SjFjbXdpT2lKb2RIUndjem92TDNkM2R5NXdZWGx3WVd4dlltcGxZM1J6TG1OdmJTOWhjR2t2WTJobFkydHZkWFF1YldsdUxtcHpJbjAlM0QmdmVyc2lvbj1taW4mdG9rZW49JHtlY1Rva2VufWBcbiAgXHRhbGVydHkuY29uZmlybShcblx0ICBgPGRpdj5cblx0ICBcdFx0U2hpcHBpbmcgdG8gJHtwYXllcl9pbmZvLnNoaXBwaW5nX2FkZHJlc3MubGluZTF9XG5cdCAgPC9kaXY+XG5cdCAgPGRpdj5cblx0ICBcdFx0U2hhbGwgd2UgZmFzdCBjaGVja291dD9cblx0ICA8L2Rpdj5cblx0ICBgLFxuXHQgIHtcblx0ICBcdHRpdGxlOiBgSGkgJHtwYXllcl9pbmZvLmZpcnN0X25hbWV9YCxcblx0ICBcdG9rTGFiZWw6ICdPa2F5Jyxcblx0ICBcdGNhbmNlbExhYmVsOiAnTm90IE5vdydcblx0ICB9LFxuXHQgIHNlbmRBcHByb3ZhbFxuXHQpXG59XG5cbmNvbnN0IGluZmlsdHJhdGUgPSAoKSA9PiB7XG5cdHZhciBhY3R1YWxDb2RlID0gJygnICsgZnVuY3Rpb24oKSB7XG5cdFx0XHR3aW5kb3cuX29sZHhwcm9wcyA9IHdpbmRvdy54cHJvcHM7XG5cdFx0XHR3aW5kb3cueHByb3BzLm9uQXV0aG9yaXplID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhhcmd1bWVudHMsICdBcmdzJylcblx0XHRcdFx0d2luZG93Ll9vbGR4cHJvcHMub25BdXRob3JpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuXHRcdFx0fVxuXHR9ICsgJykoKTsnO1xuXG5cdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0c2NyaXB0LnRleHRDb250ZW50ID0gYWN0dWFsQ29kZTtcblx0KGRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblx0c2NyaXB0LnJlbW92ZSgpO1x0XG59XG5cbmNvbnN0IGdldEVDVG9rZW4gPSAoKSA9PiB7XG5cdHZhciBhY3R1YWxDb2RlID0gJygnICsgZnVuY3Rpb24oKSB7XG5cdCAgICB3aW5kb3cueHByb3BzICYmIHdpbmRvdy54cHJvcHMucGF5bWVudCgpXG5cdCAgICBcdC50aGVuKChlY1Rva2VuKSA9PiB7XG5cdCAgICBcdFx0Y29uc29sZS5sb2coZWNUb2tlbiwgJ0VDVE9LRU4nKVxuXHRcdCBcdFx0dmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7XG5cdFx0XHRcdGV2dC5pbml0Q3VzdG9tRXZlbnQoXCJFQ19UT0tFTlwiLCB0cnVlLCB0cnVlLCBlY1Rva2VuKTtcblx0XHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldnQpO1xuXHQgICAgXHR9KVxuXHR9ICsgJykoKTsnO1xuXG5cdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0c2NyaXB0LnRleHRDb250ZW50ID0gYWN0dWFsQ29kZTtcblx0KGRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblx0c2NyaXB0LnJlbW92ZSgpO1x0XG59XG5cbmNvbnN0IHNldEFwcHJvdmFsID0gKGRhdGEpID0+IHtcblx0dmFyIGFjdHVhbENvZGUgPSBgKGZ1bmN0aW9uKCkge1xuXHQgICAgd2luZG93Lnhwcm9wcyAmJiB3aW5kb3cueHByb3BzLm9uQXV0aG9yaXplKCR7ZGF0YX0sIHtcblx0ICAgIFx0cGF5bWVudDoge1xuXHQgICAgXHRcdGdldDogKCkgPT4ge1xuXHQgICAgXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICBcdFx0XHRcdFx0cmVzb2x2ZSgke2RhdGF9KTtcblx0XHRcdFx0XHR9KTtcblx0ICAgIFx0XHR9XG5cdCAgICBcdH1cblx0ICAgIH0pXG5cdH0pKCk7YDtcblxuXHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdHNjcmlwdC50ZXh0Q29udGVudCA9IGFjdHVhbENvZGU7XG5cdChkb2N1bWVudC5oZWFkfHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cdHNjcmlwdC5yZW1vdmUoKTtcdFxufVxuXG5pZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmluZGV4T2YoJ3d3dy5wYXlwYWwuY29tJykgPiAtMSkge1xuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdFQ19UT0tFTicsIChlKSA9PiB7XG5cdCAgdmFyIGRhdGEgPSBlLmRldGFpbDtcblx0ICBjb25zb2xlLmxvZyhcInJlY2VpdmVkIFwiICsgZGF0YSlcblx0ICB3aW5kb3cudG9wLnBvc3RNZXNzYWdlKHsgdHlwZTogXCJFQ1RPS0VOXCIsIGVjVG9rZW46IGRhdGEgfSwgXCIqXCIpXG5cdH0pXG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZSkgPT4ge1xuXHRcdGlmIChlLmRhdGEgJiYgZS5kYXRhLnR5cGUgPT09ICdQUF9BUFBST1ZBTCcpIHtcblx0XHRcdHNldEFwcHJvdmFsKEpTT04uc3RyaW5naWZ5KGUuZGF0YS5kYXRhKSlcblx0XHR9XG5cdH0pXG5cblx0Ly8gaW5maWx0cmF0ZSgpXG5cdGdldEVDVG9rZW4oKVxufSBlbHNlIGlmICh3aW5kb3cudG9wID09IHdpbmRvdy5zZWxmKSB7XG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZSkgPT4ge1xuXHRcdGlmIChlLmRhdGEgJiYgZS5kYXRhLnR5cGUgPT09ICdFQ1RPS0VOJykge1xuXHRcdFx0ZWNUb2tlbiA9IGUuZGF0YS5lY1Rva2VuXG5cdFx0XHRtZXJjaGFudFdpbiA9IGUuc291cmNlXG5cblx0XHRcdGV4dC5ydW50aW1lLnNlbmRNZXNzYWdlKFxuXHRcdFx0XHR7Y29udGVudFNjcmlwdFF1ZXJ5OiAnYXBwcm92ZUVDJywgZWNUb2tlbn0sXG5cdFx0XHRcdGRhdGEgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEsICdBcHByb3ZlZCcpXG5cdFx0XHRcdFx0Ly8gZGF0YS5pbnRlbnQgPSAnc2FsZSdcblx0XHRcdFx0XHQvLyBzaG93WE8oZGF0YSwgKCkgPT4ge1xuXHRcdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ1Bvc3RpbmcgQXBwcm92YWwnKVxuXHRcdFx0XHRcdC8vIFx0ZS5zb3VyY2UucG9zdE1lc3NhZ2UoeyB0eXBlOiBcIlBQX0FQUFJPVkFMXCIsIGRhdGEgfSwgXCIqXCIpXG5cdFx0XHRcdFx0Ly8gfSlcblx0XHRcdFx0fSk7XG5cblx0XHRcdC8vIGZldGNoKGBodHRwczovL3d3dy5wYXlwYWwuY29tL3Nob3BsaXN0L3hvL2FwcHJvdmU/ZWNUb2tlbj0ke2VjVG9rZW59YCwge1xuXHRcdFx0Ly8gXHRoZWFkZXJzOiB7XG5cdFx0XHQvLyBcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHRcdFx0Ly8gXHR9XG5cdFx0XHQvLyB9KVxuXHRcdFx0Ly8gLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdC8vIFx0XHRkZWJ1Z2dlclxuXHRcdFx0Ly8gXHRcdHJldHVybiByZXNwb25zZS5qc29uKClcblx0XHRcdC8vIH0pXG5cdFx0XHQvLyAudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHQvLyBcdGNvbnNvbGUubG9nKGRhdGEsICdBcHByb3ZlZCcpXG5cdFx0XHQvLyBcdGRhdGEuaW50ZW50ID0gJ3NhbGUnXG5cblx0XHRcdC8vIFx0c2hvd1hPKGRhdGEsICgpID0+IHtcblx0XHRcdC8vIFx0XHRjb25zb2xlLmxvZygnUG9zdGluZyBBcHByb3ZhbCcpXG5cdFx0XHQvLyBcdFx0ZS5zb3VyY2UucG9zdE1lc3NhZ2UoeyB0eXBlOiBcIlBQX0FQUFJPVkFMXCIsIGRhdGEgfSwgXCIqXCIpXG5cdFx0XHQvLyBcdH0pXG5cdFx0XHQvLyB9KVxuXHRcdFx0Ly8gLmNhdGNoKGNvbnNvbGUubG9nKVxuXHRcdH0gZWxzZSBpZiAoZS5kYXRhICYmIGUuZGF0YS50eXBlID09PSAnQ0xJRU5USUQnKSB7XG5cdFx0XHRjbGllbnRJZCA9IGUuZGF0YS5jbGllbnRJZFxuXHRcdFx0Y29uc29sZS5sb2coJ0NMSUVOVElEIElTOiAnLCBjbGllbnRJZClcblx0XHR9XG5cdH0pXG59XG5cbmV4dC5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihvblJlcXVlc3QpO1xuXG4vLyBleHQud2ViUmVxdWVzdC5vbkJlZm9yZVJlcXVlc3QuYWRkTGlzdGVuZXIoXG4vLyAgIGZ1bmN0aW9uKGRldGFpbHMpIHsgXG4vLyAgICAgY29uc29sZS5sb2coJ0NhbmNlbGxpbmcnKVxuLy8gICAgIHJldHVybiB7IGNhbmNlbDogdHJ1ZSB9OyBcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIHVybHM6IFtcIio6Ly93d3cucGF5cGFsLmNvbS8qXCJcbi8vICAgXX0sXG4vLyAgIFtcImJsb2NraW5nXCJdXG4vLyApO1xuIiwiY29uc3QgYXBpcyA9IFtcbiAgJ2FsYXJtcycsXG4gICdib29rbWFya3MnLFxuICAnYnJvd3NlckFjdGlvbicsXG4gICdjb21tYW5kcycsXG4gICdjb250ZXh0TWVudXMnLFxuICAnY29va2llcycsXG4gICdkb3dubG9hZHMnLFxuICAnZXZlbnRzJyxcbiAgJ2V4dGVuc2lvbicsXG4gICdleHRlbnNpb25UeXBlcycsXG4gICdoaXN0b3J5JyxcbiAgJ2kxOG4nLFxuICAnaWRsZScsXG4gICdub3RpZmljYXRpb25zJyxcbiAgJ3BhZ2VBY3Rpb24nLFxuICAncnVudGltZScsXG4gICdzdG9yYWdlJyxcbiAgJ3RhYnMnLFxuICAnd2ViTmF2aWdhdGlvbicsXG4gICd3ZWJSZXF1ZXN0JyxcbiAgJ3dpbmRvd3MnLFxuXVxuXG5mdW5jdGlvbiBFeHRlbnNpb24gKCkge1xuICBjb25zdCBfdGhpcyA9IHRoaXNcblxuICBhcGlzLmZvckVhY2goZnVuY3Rpb24gKGFwaSkge1xuXG4gICAgX3RoaXNbYXBpXSA9IG51bGxcblxuICAgIHRyeSB7XG4gICAgICBpZiAoY2hyb21lW2FwaV0pIHtcbiAgICAgICAgX3RoaXNbYXBpXSA9IGNocm9tZVthcGldXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cblxuICAgIHRyeSB7XG4gICAgICBpZiAod2luZG93W2FwaV0pIHtcbiAgICAgICAgX3RoaXNbYXBpXSA9IHdpbmRvd1thcGldXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cblxuICAgIHRyeSB7XG4gICAgICBpZiAoYnJvd3NlclthcGldKSB7XG4gICAgICAgIF90aGlzW2FwaV0gPSBicm93c2VyW2FwaV1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHRyeSB7XG4gICAgICBfdGhpcy5hcGkgPSBicm93c2VyLmV4dGVuc2lvblthcGldXG4gICAgfSBjYXRjaCAoZSkge31cbiAgfSlcblxuICB0cnkge1xuICAgIGlmIChicm93c2VyICYmIGJyb3dzZXIucnVudGltZSkge1xuICAgICAgdGhpcy5ydW50aW1lID0gYnJvd3Nlci5ydW50aW1lXG4gICAgfVxuICB9IGNhdGNoIChlKSB7fVxuXG4gIHRyeSB7XG4gICAgaWYgKGJyb3dzZXIgJiYgYnJvd3Nlci5icm93c2VyQWN0aW9uKSB7XG4gICAgICB0aGlzLmJyb3dzZXJBY3Rpb24gPSBicm93c2VyLmJyb3dzZXJBY3Rpb25cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgRXh0ZW5zaW9uKCk7Il19"}